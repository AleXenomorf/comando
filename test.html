<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Оставьте свои контактные данные</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <style>
    :root { --primary:#00cc00; --secondary:#00aa00; }
    body{margin:0;font-family:Montserrat,system-ui,Arial;color:#fff;background:#333}
    .wrap{max-width:900px;margin:0 auto;padding:32px}
    .card{background:rgba(255,255,255,.08);padding:24px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    h1{font-family:'Playfair Display',serif;color:var(--primary);text-align:center;margin:0 0 16px}
    label{display:block;margin:10px 0 6px;font-weight:600}
    input[type="text"],input[type="email"],input[type="tel"]{width:100%;padding:12px;border-radius:10px;border:2px solid #ddd;box-sizing:border-box}
    .row{margin-bottom:14px}
    .btn{display:inline-block;background:#ff6600;border:none;color:#fff;padding:12px 22px;border-radius:999px;font-weight:700;cursor:pointer}
    .btn[disabled]{background:#888;cursor:not-allowed}
    /* чекбоксы/селекты Google оставляем только как значения, но без показа */
    .services{display:none}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Оставьте свои контактные данные</h1>

    <!-- ПРЯМОЙ САБМИТ В GOOGLE FORMS, БЕЗ JS-ОТПРАВКИ (обходит CORS/CSP) -->
    <form id="gform" action="https://docs.google.com/forms/d/e/1FAIpQLScf0Axx5RUF20o3DuZ1YzO3bj0oP75GlJgTqLEIDTB9kNy_AA/formResponse" method="POST" target="_self">
      <!-- Контакты (делаем все НЕобязательными, чтобы сабмит гарантированно уходил) -->
      <div class="row">
        <label for="firstName">Имя</label>
        <input id="firstName" name="entry.575542865" type="text" />
      </div>
      <div class="row">
        <label for="lastName">Фамилия</label>
        <input id="lastName" name="entry.1529853970" type="text" />
      </div>
      <div class="row">
        <label for="email">Email</label>
        <input id="email" name="entry.63446999" type="text" />
      </div>
      <div class="row">
        <label for="whatsapp">Номер WhatsApp (с кодом страны)</label>
        <input id="whatsapp" name="entry.826076263" type="text" />
      </div>
      <div class="row">
        <label for="promo">Промокод</label>
        <input id="promo" name="entry.3032165" type="text" placeholder="любой текст" />
      </div>

      <!-- Скрытое поле «Выбор пакета» -->
      <input type="hidden" id="servicesHiddenSingle" name="entry.1735060909" value="Базовый формат онлайн сопровождения — 150 000 тг за три месяца" />

      <!-- Кнопка САБМИТА ВНУТРИ ФОРМЫ (без JS-обработчиков) -->
      <div style="margin-top:16px">
        <button type="submit" class="btn">Оставить заявку</button>
      </div>
    </form>

    <noscript>
      <div style="margin-top:12px;color:#ffd">JS отключён — будет отправлен пакет «Базовый формат…» по умолчанию.</div>
    </noscript>
  </div>
</div>

<!-- Минимальный JS: только установка значения пакета из URL/localStorage в скрытое поле.
     Если CSP запрещает inline-script, форма всё равно отправится с дефолтом. -->
<script>
(function(){
  try {
    var hidden = document.getElementById('servicesHiddenSingle');
    if (!hidden) return;
    var OPTIONS = [
      'Для жителей Костаная — клуб «Аврора»',
      'Для жителей других стран',
      'Базовый формат онлайн сопровождения — 150 000 тг за три месяца',
      'Мини-группа в фитнес-клубе «Аврора» — 200 000 тг за три месяца',
      'Пробная неделя — 10 000 тг',
      'Пробная неделя — 15 000 тг'
    ];
    var usp = new URLSearchParams(location.search);
    var pkg = usp.get('package') || '';
    if (!pkg) {
      try {
        var st = localStorage.getItem('selectedPackage');
        if (st) { pkg = st; localStorage.removeItem('selectedPackage'); }
      } catch(e) {}
    }
    var norm = function(s){ return (s||'').replace(/[\u2013\u2014-]+/g,' — ').replace(/\s+/g,' ').trim().toLowerCase(); };
    var v = norm(pkg);
    if (v) {
      for (var i=0;i<OPTIONS.length;i++) {
        if (norm(OPTIONS[i]) === v) { hidden.value = OPTIONS[i]; return; }
      }
      if (/базовый/.test(v) || /150\s*000/.test(v)) { hidden.value = OPTIONS[2]; return; }
      if (/мини/.test(v) && /аврора/.test(v)) { hidden.value = OPTIONS[3]; return; }
      if (/костанай/.test(v)) { hidden.value = OPTIONS[0]; return; }
      if (/других\s+стран/.test(v)) { hidden.value = OPTIONS[1]; return; }
      if (/10\s*000/.test(v)) { hidden.value = OPTIONS[4]; return; }
      if (/15\s*000/.test(v)) { hidden.value = OPTIONS[5]; return; }
    }
    // иначе — дефолт уже стоит в value по умолчанию
  } catch(e) {}
})();
</script>
</body>
</html>
